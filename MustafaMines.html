<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MustafaMines</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #222;
            color: white;
            text-align: center;
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* SaÄŸdan taÅŸma olmasÄ±n */
        }
        h1 {
            margin: 20px;
            font-size: 24px;
        }
        .settings {
            margin-top: 20px;
            position: absolute;
            bottom: 100px; /* Alt kÄ±smÄ± daha yukarÄ±ya aldÄ±m */
            width: 100%;
            text-align: center;
        }
        .board {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 5px;
            justify-content: center;
            margin-top: 20px;
            max-width: 90%; /* TahtanÄ±n geniÅŸliÄŸi %90 olacak */
            margin-left: auto;
            margin-right: auto;
        }
        button {
            width: 100%;
            height: 100%;
            font-size: 18px;
            background-color: #444;
            color: white;
            border: 1px solid #999;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        button.revealed {
            background-color: #ddd;
            color: black;
        }
        button.mine {
            background-color: red;
        }
        .message {
            margin-top: 20px;
            font-size: 20px;
            color: yellow;
            position: absolute;
            top: 45%; /* MesajÄ± daha ortalamak iÃ§in */
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%; /* YÃ¼zde ile mesajÄ±n geniÅŸliÄŸini sÄ±nÄ±rladÄ±m */
        }
        .score, .spent, .points-accumulated {
            font-size: 18px;
            color: white;
            margin-top: 10px;
        }
        .spent {
            font-size: 16px;
            color: red;
        }
        .points-accumulated {
            font-size: 16px;
            color: lightblue;
        }
        .spend-message, .error {
            font-size: 16px;
            color: orange;
            margin-top: 10px;
        }
        .multiplier {
            font-size: 12px;
            color: yellow;
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
        }

        /* Mobil uyum iÃ§in medya sorgusu */
        @media (max-width: 600px) {
            .board {
                grid-template-columns: repeat(5, 1fr); /* 5 hÃ¼creli dÃ¼zen */
                grid-template-rows: repeat(5, 1fr);
            }
            button {
                font-size: 16px; /* Buton yazÄ± boyutunu kÃ¼Ã§Ã¼ltme */
                padding: 10px;
            }
            .settings {
                bottom: 60px; /* AyarlarÄ±n konumunu kÃ¼Ã§Ã¼ltme */
            }
            .score, .spent, .points-accumulated {
                font-size: 16px; /* Puan metni boyutunu kÃ¼Ã§Ã¼ltme */
            }
            .message {
                font-size: 18px; /* Mesaj yazÄ± boyutunu kÃ¼Ã§Ã¼k yapmak */
            }
        }

        /* MasaÃ¼stÃ¼ (PC) cihazlar iÃ§in daha geniÅŸ dÃ¼zenleme */
        @media (min-width: 601px) {
            .board {
                grid-template-columns: repeat(5, 1fr); /* 5 hÃ¼creli dÃ¼zen */
                grid-template-rows: repeat(5, 1fr);
            }
            button {
                font-size: 18px; /* Buton yazÄ± boyutunu bÃ¼yÃ¼tme */
            }
            .score, .spent, .points-accumulated {
                font-size: 18px; /* Puan metni boyutunu artÄ±r */
            }
            .message {
                font-size: 20px; /* Mesaj yazÄ± boyutunu artÄ±r */
            }
        }
    </style>
</head>
<body>

<h1>Minesweeper</h1>

<!-- Board Section -->
<div id="board" class="board"></div>

<!-- Score and Game Over / Win Message -->
<div id="message" class="message"></div>

<!-- Score, Spent, Accumulated Points -->
<div id="score" class="score">Puan: 1000</div>
<div id="spent" class="spent">GiriÅŸ iÃ§in harcanan puan: 0</div>
<div id="pointsAccumulated" class="points-accumulated">Biriken Puan: 0</div>
<div id="spendMessage" class="spend-message"></div>
<div id="errorMessage" class="error"></div> <!-- Hata mesajÄ± iÃ§in yeni bir alan -->

<!-- Settings Section (Alt KÄ±sÄ±mda) -->
<div class="settings">
    <label for="mineCount">MayÄ±n SayÄ±sÄ±nÄ± SeÃ§: </label>
    <input type="number" id="mineCount" value="5" min="1" max="24">
    <br><br>
    <label for="enterPoints">GiriÅŸ Ä°Ã§in Harcanan Puan: </label>
    <input type="number" id="enterPoints" value="100" min="1">
    <br><br>
    <button onclick="startGame()">Oyunu BaÅŸlat</button>
    <button onclick="spendPoints()">Puan Ã‡ek</button>
</div>

<script>
    const gridSize = 5; // Grid boyutu (5x5)
    let numMines = 5;  // BaÅŸlangÄ±Ã§ta 5 mayÄ±n
    let board = [];
    let revealedCount = 0;
    let score = 1000;   // BaÅŸlangÄ±Ã§ puanÄ± 1000
    let spentPoints = 0; // Harcanan puan
    let accumulatedPoints = 0; // Biriken puan
    let enteredPoints = 0; // GirdiÄŸi puan
    let gameOver = false;
    let isFirstCellClicked = false; // Ä°lk tÄ±klama kontrolÃ¼

    // Oyun tahtasÄ±nÄ± oluÅŸtur
    function createBoard() {
        board = [];
        revealedCount = 0;
        gameOver = false;

        // Grid ile boÅŸ hÃ¼creler oluÅŸtur
        for (let row = 0; row < gridSize; row++) {
            let rowArray = [];
            for (let col = 0; col < gridSize; col++) {
                rowArray.push({ mine: false, revealed: false });
            }
            board.push(rowArray);
        }

        // Rastgele mayÄ±nlarÄ± yerleÅŸtir
        let minesPlaced = 0;
        while (minesPlaced < numMines) {
            let row = Math.floor(Math.random() * gridSize);
            let col = Math.floor(Math.random() * gridSize);
            if (!board[row][col].mine) {
                board[row][col].mine = true;
                minesPlaced++;
            }
        }
    }

    // HÃ¼creyi aÃ§
    function revealCell(row, col) {
        if (board[row][col].revealed || gameOver) return;

        const cell = document.getElementById(`cell-${row}-${col}`);
        board[row][col].revealed = true;
        revealedCount++;

        if (!isFirstCellClicked) {
            enteredPoints = spentPoints;  // Ä°lk tÄ±klamada girdiÄŸi puan alÄ±nÄ±r
            isFirstCellClicked = true;    // Ä°lk tÄ±klama yapÄ±ldÄ±ÄŸÄ±nda deÄŸiÅŸkeni true yap
        } else {
            enteredPoints = enteredPoints * 1.1; // Sonraki tÄ±klamalarda biriken puan ile Ã§arpÄ±lÄ±r
        }

        // MayÄ±na basÄ±ldÄ±ÄŸÄ±nda, kazanÃ§ puanÄ±nÄ± eklemeyin
        if (board[row][col].mine) {
            cell.classList.add('mine');
            const multiplierElement = document.createElement('div');
            multiplierElement.classList.add('multiplier');
            multiplierElement.textContent = `x${Math.floor(enteredPoints)}`; // Ã‡arpan deÄŸeri burada yazÄ±lacak
            cell.appendChild(multiplierElement);
            cell.textContent = 'ğŸ’£'; // MayÄ±n simgesi

            showAllMines(); // TÃ¼m mayÄ±nlarÄ± gÃ¶ster
            document.getElementById("message").textContent = `MayÄ±na bastÄ±nÄ±z! Oyun Bitti! PuanÄ±nÄ±z: ${score + accumulatedPoints}`;
            gameOver = true;
            accumulatedPoints = 0;  // MayÄ±na basÄ±nca biriken puarÄ± sÄ±fÄ±rlama
        } else {
            cell.classList.add('revealed');
            // HiÃ§bir ÅŸey gÃ¶sterme (boÅŸ hÃ¼creler)
            accumulatedPoints += enteredPoints; // Biriken puana ekle
            document.getElementById("pointsAccumulated").textContent = `Biriken Puan: ${Math.floor(accumulatedPoints)}`; // Biriken puanÄ± tam sayÄ± olarak gÃ¶ster
        }

        if (revealedCount === gridSize * gridSize - numMines) {
            document.getElementById("message").textContent = `Tebrikler, KazandÄ±nÄ±z! PuanÄ±nÄ±z: ${score + accumulatedPoints}`;
            gameOver = true;
        }
    }

    // TÃ¼m mayÄ±nlarÄ± gÃ¶ster
    function showAllMines() {
        for (let row = 0; row < gridSize; row++) {
            for (let col = 0; col < gridSize; col++) {
                const cell = document.getElementById(`cell-${row}-${col}`);
                if (board[row][col].mine && !board[row][col].revealed) {
                    cell.classList.add('mine');
                    cell.textContent = 'ğŸ’£';
                }
            }
        }
    }

    // TahtayÄ± kullanÄ±cÄ±ya gÃ¶ster
    function createBoardUI() {
        const boardElement = document.getElementById('board');
        boardElement.innerHTML = ''; // TahtayÄ± sÄ±fÄ±rla
        for (let row = 0; row < gridSize; row++) {
            for (let col = 0; col < gridSize; col++) {
                const button = document.createElement('button');
                button.id = `cell-${row}-${col}`;
                button.onclick = function() {
                    revealCell(row, col);
                };
                boardElement.appendChild(button);
            }
        }
    }

    // Oyunu baÅŸlat
    function startGame() {
        numMines = parseInt(document.getElementById("mineCount").value) || 5; // MayÄ±n sayÄ±sÄ±
        createBoard();
        createBoardUI();
        document.getElementById("message").textContent = '';
        document.getElementById("spent").textContent = `GiriÅŸ iÃ§in harcanan puan: ${spentPoints}`;
        document.getElementById("pointsAccumulated").textContent = `Biriken Puan: 0`;
        spentPoints = 0;
        accumulatedPoints = 0;
        score = 1000; // PuanÄ± sÄ±fÄ±rladÄ±k
    }

    // Puan Ã§ekme iÅŸlemi
    function spendPoints() {
        let enterPoints = parseInt(document.getElementById("enterPoints").value) || 100;
        if (score < enterPoints) {
            document.getElementById("errorMessage").textContent = "Yetersiz Puan!";
        } else {
            score -= enterPoints;
            spentPoints += enterPoints;
            document.getElementById("spent").textContent = `GiriÅŸ iÃ§in harcanan puan: ${spentPoints}`;
            document.getElementById("score").textContent = `Puan: ${score}`;
        }
    }
</script>
</body>
</html>
